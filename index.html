<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="Sistema de organiza√ß√£o pessoal TDAH Friendly - Minha Rotina 360¬∞" />
  <title>Minha Rotina 360¬∞ ‚Äî TDAH Friendly</title>

  <!-- √çcone e manifest podem ser adicionados depois (PWA). -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>" />
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>" />

  <!-- CSS principal -->
  <link rel="stylesheet" href="style.css" />

  <!-- JS principal. Defer para carregar ap√≥s HTML. -->
  <script defer src="script.js"></script>
</head>

<body>
  <a href="#conteudo" class="sr-only">Pular para o conte√∫do</a>
  <noscript>
    <div style="padding:1rem;background:#9021da;color:#fff;text-align:center">
      Este app precisa de JavaScript para funcionar por completo. Ative o JS para rotas, calend√°rio, notifica√ß√µes e automa√ß√µes.
    </div>
  </noscript>

  <div class="app" id="app" data-app>
    <!-- ===================== SIDEBAR / NAV ===================== -->
    <aside role="navigation" aria-label="Navega√ß√£o principal" id="sidebar">
      <div class="brand" aria-label="Logo e nome do app">
        <span class="dot" aria-hidden="true"></span>
        <span>Minha Rotina 360¬∞</span>
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Fechar menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>

      <nav id="nav">
        <a href="#/hoje"        data-link data-route="hoje"        aria-current="page">üè† Hoje</a>
        <a href="#/planejador"  data-link data-route="planejador">üóìÔ∏è Planejador</a>
        <a href="#/tarefas"     data-link data-route="tarefas">‚úÖ Tarefas & H√°bitos</a>
        <a href="#/compromissos"data-link data-route="compromissos">üìÖ Compromissos</a>
        <a href="#/saude"       data-link data-route="saude">‚ù§Ô∏è Sa√∫de</a>
        <a href="#/ciclo"       data-link data-route="ciclo">üå∏ Ciclo</a>
        <a href="#/estudos"     data-link data-route="estudos">üìö Estudos</a>
        <a href="#/academia"    data-link data-route="academia">üèãÔ∏è Academia</a>
        <a href="#/trabalho"    data-link data-route="trabalho">üíº Trabalho</a>
        <a href="#/casa"        data-link data-route="casa">üè† Casa</a>
        <a href="#/listas"      data-link data-route="listas">üõí Listas</a>
        <a href="#/financeiro"  data-link data-route="financeiro">üí∏ Financeiro</a>
        <a href="#/devocional"  data-link data-route="devocional">üôè Devocional</a>
        <a href="#/config"      data-link data-route="config">‚öôÔ∏è Configura√ß√µes</a>
      </nav>
    </aside>

    <!-- ===================== HEADER ===================== -->
    <header role="banner">
      <div class="header-bar" id="topbar">
        <div class="header-actions" role="group" aria-label="A√ß√µes r√°pidas">
          <button class="mobile-menu-toggle" id="mobileMenuToggleOpen" aria-label="Abrir menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <button class="btn ghost" data-action="quick-add" title="Adicionar r√°pido (tarefa/compromisso)">Ôºã Adicionar</button>
          <button class="btn ghost" data-action="focus-mode" aria-pressed="false" title="Modo Foco (TDAH)">üéØ Foco</button>
          <button class="btn ghost" data-action="reading-mode" aria-pressed="false" title="Modo Leitura">üìñ Leitura</button>
        </div>
        <div class="header-actions">
          <input class="input" type="search" placeholder="Buscar tarefas, eventos..." aria-label="Busca global" id="globalSearch" />
          <button class="btn" data-action="toggle-theme" title="Alternar tema">üåì Tema</button>
          <button class="btn accent" data-route="hoje" data-link title="Ir para Hoje">Hoje</button>
        </div>
      </div>
    </header>

    <!-- ===================== MAIN ===================== -->
    <main id="conteudo" class="main" role="main">
      <!-- ===== P√ÅGINA: HOJE ===== -->
      <section class="page" data-route="hoje" aria-labelledby="h-title" aria-hidden="false">
        <h1 id="h-title" class="section-title">Hoje - <span id="today-date"></span></h1>
        <div class="grid cards">
          <article class="card" aria-labelledby="h-tarefas-title">
            <div class="muted">‚úÖ</div>
            <h2 id="h-tarefas-title">Tarefas do dia</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-task">Nova tarefa</button>
              <span class="tag">Atrasadas</span>
              <span class="tag">Pr√≥ximas 24h</span>
            </div>
            <div id="todayTasks" class="list" aria-live="polite">
              <div class="muted">Sem tarefas por enquanto.</div>
            </div>
          </article>

          <article class="card" aria-labelledby="h-compromissos-title">
            <div class="muted">üìÖ</div>
            <h2 id="h-compromissos-title">Compromissos</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-event">Novo compromisso</button>
              <a class="btn ghost" data-link data-route="compromissos" href="#/compromissos">Ver todos</a>
            </div>
            <div id="todayEvents" class="list" aria-live="polite">
              <div class="muted">Nada marcado para hoje.</div>
            </div>
          </article>

          <article class="card" aria-labelledby="h-remedios-title">
            <div class="muted">üíä</div>
            <h2 id="h-remedios-title">Rem√©dios (Hoje)</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-med">Adicionar rem√©dio</button>
            </div>
            <div id="todayMeds" class="list" aria-live="polite">
              <!-- Ritalina seed aparece aqui -->
            </div>
          </article>

          <article class="card" aria-labelledby="h-pomodoro-title">
            <div class="muted">‚è±Ô∏è</div>
            <h2 id="h-pomodoro-title">Timer / Pomodoro</h2>
            <div class="toolbar">
              <button class="btn" data-action="pomodoro-start">Iniciar 25:00</button>
              <button class="btn ghost" data-action="pomodoro-stop">Parar</button>
              <button class="btn ghost" data-action="pomodoro-reset">Reset</button>
            </div>
            <div id="pomodoroStatus" class="kpi" aria-live="polite">25:00</div>
            <div class="muted">Foco 25 min ¬∑ Pausa 5 min</div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: PLANEJADOR (Calend√°rio) ===== -->
      <section class="page" data-route="planejador" aria-labelledby="p-title" aria-hidden="true">
        <h1 id="p-title" class="section-title">Planejador ‚Äî Calend√°rio</h1>
        <div class="two">
          <div class="card">
            <div class="toolbar">
              <button class="btn" data-action="cal-prev">‚óÄ</button>
              <div id="calLabel" class="muted">M√™s/Ano</div>
              <button class="btn" data-action="cal-next">‚ñ∂</button>
              <button class="btn ghost" data-action="cal-today">Hoje</button>
              <button class="btn" data-open="modal-event">Novo evento</button>
            </div>
            <div class="calendar" id="calendar" role="grid" aria-labelledby="p-title">
              <div class="muted">Carregando calend√°rio‚Ä¶</div>
            </div>
          </div>
          <aside class="card" aria-label="Eventos do dia selecionado">
            <h2 id="day-events-title">Eventos do dia</h2>
            <div id="dayEvents" class="list">
              <div class="muted">Selecione um dia no calend√°rio.</div>
            </div>
          </aside>
        </div>
      </section>

      <!-- ===== P√ÅGINA: TAREFAS & H√ÅBITOS ===== -->
      <section class="page" data-route="tarefas" aria-labelledby="t-title" aria-hidden="true">
        <h1 id="t-title" class="section-title">Tarefas & H√°bitos</h1>
        <div class="toolbar">
          <button class="btn" data-open="modal-task">Nova tarefa</button>
          <select id="taskFilter" class="input" aria-label="Filtro de tarefas">
            <option value="all">Todas</option>
            <option value="today">Hoje</option>
            <option value="overdue">Atrasadas</option>
            <option value="next24">Pr√≥x. 24h</option>
            <option value="habits">H√°bitos</option>
            <option value="work">Trabalho</option>
            <option value="study">Estudos</option>
            <option value="home">Casa</option>
            <option value="personal">Pessoal</option>
          </select>
        </div>
        <div class="grid two-col" id="taskColumns">
          <div class="card">
            <h2>To-Do</h2>
            <div id="taskList" class="list"></div>
          </div>
          <div class="card">
            <h2>Conclu√≠das</h2>
            <div id="taskDone" class="list"></div>
          </div>
        </div>
      </section>

      <!-- ===== P√ÅGINA: COMPROMISSOS ===== -->
      <section class="page" data-route="compromissos" aria-labelledby="c-title" aria-hidden="true">
        <h1 id="c-title" class="section-title">Compromissos</h1>
        <div class="two">
          <div class="card">
            <div class="toolbar">
              <button class="btn" data-open="modal-event">Novo compromisso</button>
              <input class="input" id="eventSearch" type="search" placeholder="Buscar por t√≠tulo/local‚Ä¶" aria-label="Buscar compromisso" />
            </div>
            <div id="eventList" class="list" role="list">
              <!-- script.js preenche lista -->
            </div>
          </div>
          <aside class="card" aria-label="Detalhes do compromisso">
            <h2>Detalhes</h2>
            <div id="eventDetail" class="muted">Selecione um compromisso na lista para ver detalhes.</div>
          </aside>
        </div>
      </section>

      <!-- ===== P√ÅGINA: SA√öDE ===== -->
      <section class="page" data-route="saude" aria-labelledby="s-title" aria-hidden="true">
        <h1 id="s-title" class="section-title">Sa√∫de</h1>
        <div class="grid cards">
          <article class="card">
            <h2>Registrar M√©tricas</h2>
            <div class="toolbar"><button class="btn" data-open="modal-health">Nova m√©trica</button></div>
            <div id="healthList" class="list"></div>
          </article>
          <article class="card">
            <h2>Gr√°ficos r√°pidos</h2>
            <div class="muted">(* script.js renderiza canvas de Peso, Glicose, SpO2, BPM *)</div>
            <canvas id="chartPeso" width="600" height="220" aria-label="Gr√°fico de peso" role="img"></canvas>
            <canvas id="chartGlicose" width="600" height="220" aria-label="Gr√°fico de glicose" role="img"></canvas>
            <canvas id="chartSpO2" width="600" height="220" aria-label="Gr√°fico de satura√ß√£o" role="img"></canvas>
            <canvas id="chartBPM" width="600" height="220" aria-label="Gr√°fico de batimentos" role="img"></canvas>
          </article>
          <article class="card">
            <h2>Medica√ß√µes</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-med">Adicionar rem√©dio</button>
              <button class="btn ghost" data-action="med-schedule">Agendar lembretes</button>
            </div>
            <div id="medList" class="list"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: CICLO ===== -->
      <section class="page" data-route="ciclo" aria-labelledby="ci-title" aria-hidden="true">
        <h1 id="ci-title" class="section-title">Ciclo</h1>
        <div class="card">
          <div class="toolbar">
            <button class="btn" data-action="cycle-mark-period">Marcar in√≠cio da menstrua√ß√£o</button>
            <button class="btn ghost" data-action="cycle-add-symptom">Adicionar sintoma</button>
          </div>
          <div id="cycleCalendar" class="calendar">
            <div class="muted">(* script.js mostra calend√°rio com previs√£o e sintomas *)</div>
          </div>
        </div>
      </section>

      <!-- ===== P√ÅGINA: ESTUDOS ===== -->
      <section class="page" data-route="estudos" aria-labelledby="e-title" aria-hidden="true">
        <h1 id="e-title" class="section-title">Estudos</h1>
        <div class="grid cards">
          <article class="card">
            <h2>Pomodoro de Estudos</h2>
            <div class="toolbar">
              <button class="btn" data-action="study-pomo-start">Iniciar</button>
              <button class="btn ghost" data-action="study-pomo-stop">Parar</button>
            </div>
            <div id="studyTimer" class="kpi">25:00</div>
          </article>
          <article class="card">
            <h2>Mat√©rias & Sess√µes</h2>
            <div class="toolbar"><button class="btn" data-open="modal-study">Nova sess√£o</button></div>
            <div id="studyList" class="list"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: ACADEMIA ===== -->
      <section class="page" data-route="academia" aria-labelledby="a-title" aria-hidden="true">
        <h1 id="a-title" class="section-title">Academia</h1>
        <div class="grid cards">
          <article class="card">
            <h2>Treinos</h2>
            <div class="toolbar"><button class="btn" data-open="modal-workout">Novo treino</button></div>
            <div id="workoutList" class="list"></div>
          </article>
          <article class="card">
            <h2>Calend√°rio de Treinos</h2>
            <div id="workoutCalendar" class="calendar"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: TRABALHO ===== -->
      <section class="page" data-route="trabalho" aria-labelledby="w-title" aria-hidden="true">
        <h1 id="w-title" class="section-title">Trabalho</h1>
        <div class="grid two-col">
          <article class="card">
            <h2>Projetos</h2>
            <div class="toolbar"><button class="btn" data-open="modal-project">Novo projeto</button></div>
            <div id="projectList" class="list"></div>
          </article>
          <article class="card">
            <h2>Pr√≥ximos 7 dias</h2>
            <div id="workNext7" class="list"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: CASA ===== -->
      <section class="page" data-route="casa" aria-labelledby="h-title2" aria-hidden="true">
        <h1 id="h-title2" class="section-title">Casa</h1>
        <div class="grid two-col">
          <article class="card">
            <h2>Afazeres dom√©sticos</h2>
            <div class="toolbar"><button class="btn" data-open="modal-chore">Novo afazer</button></div>
            <div id="choreList" class="list"></div>
          </article>
          <article class="card">
            <h2>Lista de Compras</h2>
            <div class="toolbar"><button class="btn" data-open="modal-shopping">Novo item</button></div>
            <div id="shoppingList" class="list"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: LISTAS ===== -->
      <section class="page" data-route="listas" aria-labelledby="l-title" aria-hidden="true">
        <h1 id="l-title" class="section-title">Listas</h1>
        <div class="grid cards">
          <article class="card">
            <h2>Lista de Compras</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-shopping">Novo item</button>
              <button class="btn ghost" data-action="clear-shopping">Limpar lista</button>
            </div>
            <div id="shoppingListFull" class="list"></div>
          </article>
          <article class="card">
            <h2>Lista de Desejos</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-wishlist">Novo desejo</button>
            </div>
            <div id="wishList" class="list"></div>
          </article>
          <article class="card">
            <h2>Lista de Filmes/S√©ries</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-media">Novo item</button>
            </div>
            <div id="mediaList" class="list"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: FINANCEIRO ===== -->
      <section class="page" data-route="financeiro" aria-labelledby="f-title" aria-hidden="true">
        <h1 id="f-title" class="section-title">Financeiro</h1>
        <div class="grid cards">
          <article class="card">
            <h2>Resumo Financeiro</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-transaction">Nova transa√ß√£o</button>
              <button class="btn ghost" data-open="modal-budget">Definir or√ßamento</button>
            </div>
            <div class="finance-summary">
              <div class="finance-item">
                <span class="finance-label">Saldo Atual</span>
                <span class="finance-value" id="currentBalance">R$ 0,00</span>
              </div>
              <div class="finance-item">
                <span class="finance-label">Receitas do M√™s</span>
                <span class="finance-value ok" id="monthlyIncome">R$ 0,00</span>
              </div>
              <div class="finance-item">
                <span class="finance-label">Despesas do M√™s</span>
                <span class="finance-value bad" id="monthlyExpenses">R$ 0,00</span>
              </div>
            </div>
          </article>
          <article class="card">
            <h2>Transa√ß√µes Recentes</h2>
            <div class="toolbar">
              <select id="transactionFilter" class="input">
                <option value="all">Todas</option>
                <option value="income">Receitas</option>
                <option value="expense">Despesas</option>
              </select>
            </div>
            <div id="transactionList" class="list"></div>
          </article>
          <article class="card">
            <h2>Or√ßamentos</h2>
            <div id="budgetList" class="list"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: DEVOCIONAL ===== -->
      <section class="page" data-route="devocional" aria-labelledby="d-title" aria-hidden="true">
        <h1 id="d-title" class="section-title">Devocional</h1>
        <div class="grid cards">
          <article class="card">
            <h2>Leitura Di√°ria</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-devotional">Registrar leitura</button>
            </div>
            <div id="devotionalList" class="list"></div>
          </article>
          <article class="card">
            <h2>Ora√ß√µes</h2>
            <div class="toolbar">
              <button class="btn" data-open="modal-prayer">Nova ora√ß√£o</button>
            </div>
            <div id="prayerList" class="list"></div>
          </article>
        </div>
      </section>

      <!-- ===== P√ÅGINA: CONFIGURA√á√ïES ===== -->
      <section class="page" data-route="config" aria-labelledby="config-title" aria-hidden="true">
        <h1 id="config-title" class="section-title">Configura√ß√µes</h1>
        <div class="grid cards">
          <article class="card">
            <h2>Apar√™ncia</h2>
            <div class="toolbar">
              <button class="btn" data-action="toggle-theme">Alternar Tema</button>
              <select id="accentColor" class="input">
                <option value="purple">Roxo</option>
                <option value="blue">Azul</option>
                <option value="green">Verde</option>
                <option value="pink">Rosa</option>
              </select>
            </div>
          </article>
          <article class="card">
            <h2>Notifica√ß√µes</h2>
            <div class="toolbar">
              <label class="checkbox">
                <input type="checkbox" id="notificationsEnabled" checked>
                <span>Ativar notifica√ß√µes</span>
              </label>
            </div>
          </article>
          <article class="card">
            <h2>Backup</h2>
            <div class="toolbar">
              <button class="btn" data-action="export-data">Exportar Dados</button>
              <button class="btn ghost" data-action="import-data">Importar Dados</button>
              <button class="btn bad" data-action="clear-data">Limpar Todos os Dados</button>
            </div>
          </article>
        </div>
      </section>
    </main>
  </div>

  <!-- ===================== MODAIS ===================== -->
  
  <!-- Modal Tarefa -->
  <dialog id="modal-task">
    <form id="formTask">
      <h2>Nova Tarefa</h2>
      <label>
        T√≠tulo
        <input type="text" name="title" required>
      </label>
      <label>
        Descri√ß√£o
        <textarea name="notes" rows="3"></textarea>
      </label>
      <label>
        Data de Vencimento
        <input type="date" name="due">
      </label>
      <label>
        Prioridade
        <select name="priority">
          <option value="low">Baixa</option>
          <option value="medium">M√©dia</option>
          <option value="high">Alta</option>
        </select>
      </label>
      <label>
        Projeto/Categoria
        <select name="project">
          <option value="personal">Pessoal</option>
          <option value="work">Trabalho</option>
          <option value="study">Estudos</option>
          <option value="home">Casa</option>
        </select>
      </label>
      <menu>
        <button type="button" class="btn ghost" data-close>Cancelar</button>
        <button type="submit" class="btn accent">Salvar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal Compromisso -->
  <dialog id="modal-event">
    <form id="formEvent">
      <h2>Novo Compromisso</h2>
      <label>
        T√≠tulo
        <input type="text" name="title" required>
      </label>
      <label>
        Local
        <input type="text" name="location">
      </label>
      <label>
        Data e Hora de In√≠cio
        <input type="datetime-local" name="start" required>
      </label>
      <label>
        Data e Hora de Fim
        <input type="datetime-local" name="end" required>
      </label>
      <label>
        Lembretes (minutos antes)
        <input type="text" name="reminders" placeholder="15, 30, 60">
      </label>
      <menu>
        <button type="button" class="btn ghost" data-close>Cancelar</button>
        <button type="submit" class="btn accent">Salvar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal Medica√ß√£o -->
  <dialog id="modal-med">
    <form id="formMed">
      <h2>Nova Medica√ß√£o</h2>
      <label>
        Nome
        <input type="text" name="name" required>
      </label>
      <label>
        Dosagem
        <input type="text" name="dose" required placeholder="ex: 10mg">
      </label>
      <label>
        Hor√°rios
        <input type="text" name="times" required placeholder="ex: 08:00, 12:00, 18:00">
      </label>
      <label>
        Data de In√≠cio
        <input type="date" name="startDate">
      </label>
      <label>
        Data de T√©rmino
        <input type="date" name="endDate">
      </label>
      <menu>
        <button type="button" class="btn ghost" data-close>Cancelar</button>
        <button type="submit" class="btn accent">Salvar</button>
      </menu>
    </form>
  </dialog>

  <!-- Modal Financeiro -->
  <dialog id="modal-transaction">
    <form id="formTransaction">
      <h2>Nova Transa√ß√£o</h2>
      <label>
        Descri√ß√£o
        <input type="text" name="description" required>
      </label>
      <label>
        Valor
        <input type="number" name="amount" step="0.01" required>
      </label>
      <label>
        Tipo
        <select name="type" required>
          <option value="income">Receita</option>
          <option value="expense">Despesa</option>
        </select>
      </label>
      <label>
        Categoria
        <select name="category" required>
          <option value="salary">Sal√°rio</option>
          <option value="food">Alimenta√ß√£o</option>
          <option value="transport">Transporte</option>
          <option value="health">Sa√∫de</option>
          <option value="entertainment">Entretenimento</option>
          <option value="other">Outro</option>
        </select>
      </label>
      <label>
        Data
        <input type="date" name="date" required>
      </label>
      <menu>
        <button type="button" class="btn ghost" data-close>Cancelar</button>
        <button type="submit" class="btn accent">Salvar</button>
      </menu>
    </form>
  </dialog>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay" style="display:none;">
    <div class="loading-spinner"></div>
  </div>
</body>
</html>